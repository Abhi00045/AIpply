generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
}

model User {
  id           String        @id @default(uuid())
  fullName     String
  email        String        @unique
  password     String
  role         Role          @default(JOBSEEKER)
  createdAt    DateTime      @default(now())
  updatedAt    DateTime      @updatedAt

  applications Application[] // ðŸ‘ˆ add this
}

enum Role {
  JOBSEEKER
  RECRUITER
}

model JobPosting {
  id           String   @id @default(uuid())
  jobId        Int?     // ? means optional
  company      String
  logo         String   @default("https://cdn-icons-png.flaticon.com/512/5968/5968292.png")
  role         String
  companyEmail String?
  location     String
  experience   String
  type         String   @default("On-site")
  skills       String[] // array of strings, same as [String] in mongoose
  description  String?
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt

  // relation to applications
  applications Application[]
}


enum ApplicationStatus {
  Applied
  Interviewed
  Offer
  Waitlisted
  Rejected
}

model Application {
  id        String            @id @default(uuid())
  company   String            @default("")
  position  String            @default("")
  status    ApplicationStatus @default(Applied)
  date      String            @default("")
  salary    String            @default("")
  resume    String?
  resumeUrl String?
  createdAt DateTime          @default(now())
  updatedAt DateTime          @updatedAt

  // relations
  userId    String
  user      User       @relation(fields: [userId], references: [id])

  jobId     String?
  job       JobPosting? @relation(fields: [jobId], references: [id])
}